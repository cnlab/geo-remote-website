<div class="authors-grid">
    {% assign affil_data = site.data.affiliations %}
    
    {% for author in site.data.authors %}
      <div class="author-card" onclick="this.classList.toggle('expanded')">
        {% if author.photo %}
          <img src="{{ '/assets/images/team/' | relative_url }}{{ author.photo }}" 
               alt="{{ author.name }}" 
               class="author-photo">
        {% endif %}
        
        <div class="author-info">
          <h3>
            {{ author.name }}
            {% if author.cofirst %}<span class="cofirst-label">*</span>{% endif %}
            {% if author.orcid %}
              <a href="https://orcid.org/{{ author.orcid }}" class="orcid-link" target="_blank" onclick="event.stopPropagation()">
                <img src="{{ '/assets/images/orcid.svg' | relative_url }}" alt="ORCID" width="16">
              </a>
            {% endif %}
          </h3>
  
          <div class="affiliations">
            {% for num in author.affil %}
              <sup>{{ num }}</sup>{% unless forloop.last %}, {% endunless %}
            {% endfor %}
            <div class="full-affil">
              {% for num in author.affil %}
                {{ affil_data[num] }}{% unless forloop.last %}; {% endunless %}
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  
  <style>
    .authors-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
    }
    
    .author-card {
      border: 1px solid #eee;
      padding: 0.8rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
    }
  
    .author-card:hover {
      border-color: #4a90e2;
    }
  
    .author-card.expanded {
      padding: 0.8rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  
    .author-photo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      float: left;
      margin-right: 0.8rem;
      border: 2px solid #f0f0f0;
    }
  
    .author-info {
      margin-left: 70px;
    }
  
    h3 {
      margin: 0 0 0.2rem 0;
      font-size: 1rem;
    }
  
    .affiliations {
      font-size: 0.85rem;
    }
  
    .full-affil {
      display: none;
      font-size: 0.8rem;
      margin-top: 0.5rem;
      color: #555;
      border-top: 1px dashed #ddd;
      padding-top: 0.5rem;
    }
  
    .author-card.expanded .full-affil {
      display: block;
    }
  
    .orcid-link {
      margin-left: 0.3rem;
    }
  </style>